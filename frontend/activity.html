<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Placement Admin - Activities</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: 'Segoe UI', sans-serif;
}

body{
    background:#f5f7fb;
    display:flex;
}

/* ================= SIDEBAR ================= */
.sidebar{
    width:240px;
    height:100vh;
    background:#1e2a78;
    color:white;
    padding:25px 20px;
    position:fixed;
}

.sidebar h2{
    font-size:20px;
    margin-bottom:40px;
    display:flex;
    align-items:center;
}

.sidebar h2 span{
    margin-right:10px;
}

.sidebar ul{
    list-style:none;
}

.sidebar ul li{
    padding:12px 15px;
    border-radius:8px;
    margin-bottom:10px;
    cursor:pointer;
    transition:0.3s;
}

.sidebar ul li:hover,
.sidebar ul li.active{
    background:#2f3ea6;
}

/* ================= MAIN ================= */
.main{
    margin-left:240px;
    width:100%;
    padding:25px;
}

h1{
    font-size:28px;
    margin-bottom:20px;
}

.cards{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:20px;
    margin-bottom:30px;
}

.card{
    background:white;
    padding:25px;
    border-radius:14px;
    box-shadow:0 8px 20px rgba(0,0,0,0.05);
}

.card h3{
    font-size:14px;
    color:#777;
    margin-bottom:10px;
}

.card h2{
    font-size:32px;
}

.status-badge.attended { background: #dcfce7; color: #166534; }
.status-badge.pending { background: #fef3c7; color: #92400e; }
.status-badge.completed { background: #dbeafe; color: #1e40af; }
.status-badge.in-progress { background: #e0e7ff; color: #3730a3; }

/* ================= TABLE ================= */
.table-container {
    background: white;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0,0,0,0.05);
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 16px 20px;
    text-align: left;
    font-size: 14px;
}

thead {
    background: #f8fafc;
}

thead th {
    font-weight: 600;
    color: #475569;
    border-bottom: 2px solid #e2e8f0;
}

tbody tr {
    border-bottom: 1px solid #f1f5f9;
    transition: 0.2s;
}

tbody tr:hover {
    background: #f8fafc;
}

tbody td {
    color: #334155;
}

.status-badge {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.empty-state {
    text-align: center;
    padding: 40px;
    color: #94a3b8;
}
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2><span>ðŸŽ“</span>Placement Admin</h2>
    <ul>
        <li onclick="navigateTo('dashboard.html', this)">Dashboard</li>
        <li class="active" onclick="navigateTo('activity.html', this)">Activities</li>
        <li onclick="navigateTo('history.html', this)">History</li>
        <li onclick="navigateTo('profile.html', this)">Profile</li>
    </ul>
</div>

<script>
function navigateTo(page, element) {
    document.querySelectorAll('.sidebar ul li').forEach(li => {
        li.classList.remove('active');
    });
    element.classList.add('active');
    window.location.href = page;
}
</script>

<!-- MAIN -->
<div class="main">

    <h1>Activities</h1>

    <div class="cards">
        <div class="card">
            <h3>Total Activities</h3>
            <h2 id="totalActivities">0</h2>
        </div>
        <div class="card">
            <h3>Upcoming</h3>
            <h2 id="upcomingActivities">0</h2>
        </div>
        <div class="card">
            <h3>Completed</h3>
            <h2 id="completedActivities">0</h2>
        </div>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Activity ID</th>
                    <th>Student Name</th>
                    <th>Dept</th>
                    <th>Activity</th>
                    <th>Date</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="activityTableBody">
            </tbody>
        </table>
    </div>

</div>

<script>
let activitiesData = [];

// Fetch activities from local data
fetch('../backend/data.json')
    .then(response => response.json())
    .then(data => {
        activitiesData = data.activities;
        renderActivities();
        updateCards();
    })
    .catch(error => console.error('Error loading activities:', error));

function renderActivities() {
    const tableBody = document.getElementById('activityTableBody');
    tableBody.innerHTML = '';

    if (activitiesData.length === 0) {
        tableBody.innerHTML = '<tr><td colspan="6" class="empty-state">No activities found</td></tr>';
        return;
    }

    activitiesData.forEach(activity => {
        const statusClass = activity.status.toLowerCase().replace(' ', '-');
        const row = `
            <tr>
                <td>${activity.id}</td>
                <td>${activity.student_name}</td>
                <td>${activity.dept}</td>
                <td>${activity.activity}</td>
                <td>${activity.date}</td>
                <td><span class="status-badge ${statusClass}">${activity.status}</span></td>
            </tr>
        `;
        tableBody.innerHTML += row;
    });
}

function updateCards() {
    document.getElementById('totalActivities').textContent = activitiesData.length;
    
    const upcoming = activitiesData.filter(a => a.status === 'Pending').length;
    document.getElementById('upcomingActivities').textContent = upcoming;
    
    const completed = activitiesData.filter(a => a.status === 'Completed' || a.status === 'Attended').length;
    document.getElementById('completedActivities').textContent = completed;
}
</script>

</body>
</html>
